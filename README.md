# Testing Library Notes

- [Testing Library Notes](#testing-library-notes)
  - [Lessons](#lessons)
  - [Notes](#notes)

## Lessons

- [X] ~~*Lesson 01* - How to Get Help~~ [2023-03-06]
- [X] ~~*Lesson 02* Start Testing ... Now~~[2023-03-06]
- [X] ~~*Lesson 03 - A Few Critical Questions*~~ [2023-03-06]
- [X] ~~*Lesson 04 - Project Setup*~~ [2023-03-07]
- [X] ~~*Lesson 05 - Adding the Form*~~ [2023-03-07]
- [X] ~~*Lesson 06 - Handling User Input*~~ [2023-03-07]
- [X] ~~*Lesson 07 - Rendering the List of Users*~~ [2023-03-07]
- [X] ~~*Lesson 08 - Our First Test*~~ [2023-03-07]
- [X] ~~*Lesson 09 - Element Query System*~~ [2023-03-07]
- [X] ~~*Lesson 10 - Understanding ARIA Roles*~~ [2023-03-07]
- [X] ~~*Lesson 11 - Understanding Jest Matchers*~~ [2023-03-07]
- [X] ~~*Lesson 12 - Simulating User Events*~~ [2023-03-07]
- [X] ~~*Lesson 13 - Recording Function Calls*~~ [2023-03-07]
- [X] ~~*Lesson 14 - Introducing Mock Functions*~~ [2023-03-07] 
- [X] ~~*Lesson 15 - Querying Elements by Labels*~~ [2023-03-07]
- [X] ~~*Lesson 16 - Testing the UserList*~~ [2023-03-07]
- [X] ~~*Lesson 17 - Getting Help with Query Functions*~~ [2023-03-07]
- [X] ~~*Lesson 18 - Query Function Escape Hatches*~~ [2023-03-07]
- [X] ~~*Lesson 19 - Another Query Function Fallback*~~ [2023-03-07]
- [X] ~~*Lesson 20 - Testing Table Contents*~~ [2023-03-07]
- [X] ~~*Lesson 21 - Avoiding BeforeEach*~~ [2023-03-07]
- [X] ~~*Lesson 22 - Testing the Whole App*~~ [2023-03-07]
- [X] ~~*Lesson 23 - A Touch of Test Driven Development*~~ [2023-03-07]
- [X] ~~*Lesson 24 - Feature Implementation*~~ [2023-03-07]
- [X] ~~*Lesson 25 - Introducing RTL Book*~~ [2023-03-07]
- [X] ~~*Lesson 26 - A Few Notes on RTL Book*~~ [2023-03-07]
- [X] ~~*Lesson 27 - Partial Role List*~~ [2023-03-07]
- [X] ~~*Lesson 28 - Finding Elements by Role*~~ [2023-03-07]
- [X] ~~*Lesson 29 - Finding by Accessible Names*~~ [2023-03-07]
- [X] ~~*Lesson 30 - Linking Input to Labels*~~ [2023-03-07]
- [X] ~~*Lesson 31 - Directly Assigning an Accessible Name*~~ [2023-03-07]
- [X] ~~*Lesson 32 - Deeper into Query Functions*~~ [2023-03-07]
- [X] ~~*Lesson 33 - GetBy, QueryBy, FindBy*~~ [2023-03-07]
- [X] ~~*Lesson 34 - More on Single Queries*~~ [2023-03-07]
- [X] ~~*Lesson 35 - Multiple Element Variations*~~ [2023-03-07]
- [X] ~~*Lesson 36 - When to use These Queries*~~ [2023-03-07]
- [X] ~~*Lesson 37 - When to use Async Queries*~~ [2023-03-07]
- [X] ~~*Lesson 38 - Query Criteria*~~ [2023-03-07]
- [X] ~~*Lesson 39 - When to Use Each Suffix*~~ [2023-03-07]
- [X] ~~*Lesson 40 - Diving into Matcher*~~ [2023-03-07]
- [X] ~~*Lesson 41 - Introducing Custom Matchers*~~ [2023-03-07]
- [X] ~~*Lesson 42 - Implementing a Custom Matcher*~~ [2023-03-07]
- [X] ~~*Lesson 43 - App Overview and Setup*~~ [2023-03-08]
- [X] ~~*Lesson 44 - The Tech in This Project*~~ [2023-03-08]
- [X] ~~*Lesson 45 - The Path Ahead*~~ [2023-03-08]
- [X] ~~*Lesson 46 - A Process for Debugging*~~ [2023-03-08]
- [X] ~~*Lesson 47 - Understanding Data Flowing Into the Component*~~ [2023-03-08]
- [X] ~~*Lesson 48 - Developing a Test and a Fix*~~ [2023-03-08]
- [X] ~~*Lesson 49 - Looping Over Assertions*~~ [2023-03-08]
- [X] ~~*Lesson 50 - Flexible Queries*~~ [2023-03-08]
- [X] ~~*Lesson 51 - Another Bug!*~~ [2023-03-08]
- [X] ~~*Lesson 52 - Analyzing the Data ... Again!*~~ [2023-03-08]
- [X] ~~*Lesson 53 - Analyzing Router Context*~~ [2023-03-08]
- [X] ~~*Lesson 54 - Unexpected State Updates*~~ [2023-03-08]
- [X] ~~*Lesson 55 - Act Included with React Testing Library*~~ [2023-03-08]
- [X] ~~*Lesson 56 - Using Act (Hopefully Not!) with RTL*~~ [2023-03-08]
- [X] ~~*Lesson 57 - Solving the Act Warning*~~ [2023-03-08]
- [X] ~~*Lesson 58 - Module Mocks*~~ [2023-03-08]
- [X] ~~*Lesson 59 - Absolute Last Ditch Act Solution*~~ [2023-03-08]
- [X] ~~*Lesson 60 - Checking the Link Href*~~ [2023-03-08]
- [X] ~~*Lesson 61 - Implementing the Feature*~~ [2023-03-08]
- [X] ~~*Lesson 62 - Checking the Icon*~~ [2023-03-08]
- [X] ~~*Lesson 63 - Checking the Link*~~ [2023-03-08]
- [X] ~~*Lesson 64 - Easy Fix, Hard Test*~~ [2023-03-08]
- [X] ~~*Lesson 65 - Options for Testing Data Fetching*~~ [2023-03-08]
- [X] ~~*Lesson 66 - Using a Request Handler*~~ [2023-03-08]
- [X] ~~*Lesson 67 - Initial MSW Setup*~~ [2023-03-08]
- [X] ~~*Lesson 68 - Inspecting the Component State*~~ [2023-03-08]
- [X] ~~*Lesson 69 - Effective Request Testing*~~ [2023-03-08]
- [X] ~~*Lesson 70 - An Issue with Fake Handlers*~~ [2023-03-08]
- [X] ~~*Lesson 71 - Easier Fake Routes - Here's the Goal*~~ [2023-03-08]
- [X] ~~*Lesson 72 - Making a Reusable Create Server Function*~~ [2023-03-08]
- [X] ~~*Lesson 73 - Testing Authentication*~~ [2023-03-08]
- [X] ~~*Lesson 74 - Understanding the Auth API*~~ [2023-03-08]
- [X] ~~*Lesson 75 - Order of Execution*~~ [2023-03-08]
- [X] ~~*Lesson 76 - Scoping Test Hooks*~~ [2023-03-08]
- [X] ~~*Lesson 77 - Act Warnings ... Again!*~~ [2023-03-08]
- [X] ~~*Lesson 78 - Assertions Around Auth Links*~~ [2023-03-08]
- [X] ~~*Lesson 79 - Wait ... It Doesn't Work*~~ [2023-03-08]
- [X] ~~*Lesson 80 - Limiting Test Execution*~~ [2023-03-08]
- [X] ~~*Lesson 81 - Using Debuggers in Tests*~~ [2023-03-08]
- [X] ~~*Lesson 82 - Test Debugging in Action*~~ [2023-03-08]
- [X] ~~*Lesson 83 - One Last Debugging Hint*~~ [2023-03-08]
- [X] ~~*Lesson 84 - It Is a Caching Issue*~~ [2023-03-08]
- [X] ~~*Lesson 85 - Solving the Caching Issue*~~ [2023-03-08]

## Notes

- `title` attribute adds a tooltip to an HTMLElement
- When encountering `act` error message, it's at times helpful to mock
  troublesome components
  - `jest.mock('../tree/FileIcon', () => () => 'File Icon Component')`
- A last ditch solution is to insert an explicit `pause` and `act` combo

```javascript
import {act} from 'testing-library/react'

const pause = () => new Promise(resolve => {setTimeout(()=> resolve(),100)})

test('annoying test', async () => {
  // RENDER
  await act(async () => {
    await pause()
  })
  // ASSERT
})
```
- Creating a reusable `createServer` helper in `/test`

```javascript
import { setupServer } from 'msw/node'
import { rest } from 'msw'

export default createServer = (handlerConfig) => {
  const handlers = handlerConfig.map((config) => {
    return rest[config.method ?? 'get'](config.path, (req, res, ctx) => {
      return res(ctx.json(config.res(req, res, ctx)))
    })
  })

  const server = setupServer(...handlers)

  beforeAll(() => {
    server.listen()
  })

  afterEach(() => {
    server.resetHandlers()
  })

  afterAll(() => {
    server.close()
  })
}
```
